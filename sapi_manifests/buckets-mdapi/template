[log]
{{#BUCKETS_MDAPI_LOG_LEVEL}}
level = "{{BUCKETS_MDAPI_LOG_LEVEL}}"
{{/BUCKETS_MDAPI_LOG_LEVEL}}
{{^BUCKETS_MDAPI_LOG_LEVEL}}
level = "info"
{{/BUCKETS_MDAPI_LOG_LEVEL}}

[server]
{{#BUCKETS_MDAPI_SERVER_HOST}}
host = "{{BUCKETS_MDAPI_SERVER_HOST}}"
{{/BUCKETS_MDAPI_SERVER_HOST}}
{{^BUCKETS_MDAPI_SERVER_HOST}}
host = "0.0.0.0"
{{/BUCKETS_MDAPI_SERVER_HOST}}
{{#BUCKETS_MDAPI_SERVER_PORT}}
port = {{BUCKETS_MDAPI_SERVER_PORT}}
{{/BUCKETS_MDAPI_SERVER_PORT}}
{{^BUCKETS_MDAPI_SERVER_PORT}}
#
# This default value should be kept in sync with the default value in
# boot/setup.sh and the Makefile.
#
port = 2030
{{/BUCKETS_MDAPI_SERVER_PORT}}

[metrics]
{{#BUCKETS_MDAPI_METRICS_HOST}}
host = "{{BUCKETS_MDAPI_METRICS_HOST}}"
{{/BUCKETS_MDAPI_METRICS_HOST}}
{{^BUCKETS_MDAPI_METRICS_HOST}}
host = "0.0.0.0"
{{/BUCKETS_MDAPI_METRICS_HOST}}
{{#BUCKETS_MDAPI_METRICS_PORT}}
port = {{BUCKETS_MDAPI_METRICS_PORT}}
{{/BUCKETS_MDAPI_METRICS_PORT}}
{{^BUCKETS_MDAPI_METRICS_PORT}}
port = 3020
{{/BUCKETS_MDAPI_METRICS_PORT}}

[database]
admin_user = "postgres"
user = "buckets_mdapi"
{{#BUCKETS_MDAPI_DATABASE_HOST}}
host = "{{BUCKETS_MDAPI_DATABASE_HOST}}"
{{/BUCKETS_MDAPI_DATABASE_HOST}}
{{^BUCKETS_MDAPI_DATABASE_HOST}}
host = "127.0.0.1"
{{/BUCKETS_MDAPI_DATABASE_HOST}}
{{#BUCKETS_MDAPI_DATABASE_PORT}}
port = {{BUCKETS_MDAPI_DATABASE_PORT}}
{{/BUCKETS_MDAPI_DATABASE_PORT}}
{{^BUCKETS_MDAPI_DATABASE_PORT}}
port = 5432
{{/BUCKETS_MDAPI_DATABASE_PORT}}
{{#BUCKETS_MDAPI_DATABASE_DATABASE}}
database = "{{BUCKETS_MDAPI_DATABASE_DATABASE}}"
{{/BUCKETS_MDAPI_DATABASE_DATABASE}}
{{^BUCKETS_MDAPI_DATABASE_DATABASE}}
database = "buckets_metadata"
{{/BUCKETS_MDAPI_DATABASE_DATABASE}}
{{#BUCKETS_MDAPI_DATABASE_APPLICATION_NAME}}
application_name = "{{BUCKETS_MDAPI_DATABASE_APPLICATION_NAME}}"
{{/BUCKETS_MDAPI_DATABASE_APPLICATION_NAME}}
{{^BUCKETS_MDAPI_DATABASE_APPLICATION_NAME}}
application_name = "buckets_mdapi"
{{/BUCKETS_MDAPI_DATABASE_APPLICATION_NAME}}
{{#BUCKETS_MDAPI_DATABASE_TLS_MODE}}
tls_mode = "{{BUCKETS_MDAPI_DATABASE_TLS_MODE}}"
{{/BUCKETS_MDAPI_DATABASE_TLS_MODE}}
{{^BUCKETS_MDAPI_DATABASE_TLS_MODE}}
tls_mode = "disable"
{{/BUCKETS_MDAPI_DATABASE_TLS_MODE}}

[zookeeper]
path = "/manatee/{{SERVICE_NAME}}"
connection_string = [{{#ZK_SERVERS}}"{{host}}:{{port}}"{{^last}},{{/last}}{{/ZK_SERVERS}}]

[cueball]
{{#BUCKETS_MDAPI_CUEBALL_MAX_CONNECTIONS}}
max_connections = {{BUCKETS_MDAPI_CUEBALL_MAX_CONNECTIONS}}
{{/BUCKETS_MDAPI_CUEBALL_MAX_CONNECTIONS}}
{{^BUCKETS_MDAPI_CUEBALL_MAX_CONNECTIONS}}
max_connections = 64
{{/BUCKETS_MDAPI_CUEBALL_MAX_CONNECTIONS}}
{{#BUCKETS_MDAPI_CUEBALL_CLAIM_TIMEOUT}}
claim_timeout = {{BUCKETS_MDAPI_CUEBALL_CLAIM_TIMEOUT}}
{{/BUCKETS_MDAPI_CUEBALL_CLAIM_TIMEOUT}}
{{^BUCKETS_MDAPI_CUEBALL_CLAIM_TIMEOUT}}
claim_timeout = 500 # milliseconds
{{/BUCKETS_MDAPI_CUEBALL_CLAIM_TIMEOUT}}
{{#BUCKETS_MDAPI_CUEBALL_REBALANCER_ACTION_DELAY}}
rebalancer_action_delay = {{BUCKETS_MDAPI_CUEBALL_REBALANCER_ACTION_DELAY}}
{{/BUCKETS_MDAPI_CUEBALL_REBALANCER_ACTION_DELAY}}
{{^BUCKETS_MDAPI_CUEBALL_REBALANCER_ACTION_DELAY}}
rebalancer_action_delay = 20 # milliseconds
{{/BUCKETS_MDAPI_CUEBALL_REBALANCER_ACTION_DELAY}}


[tokio]
{{#BUCKETS_MDAPI_TOKIO_BLOCKING_THREADS}}
blocking_threads = {{BUCKETS_MDAPI_TOKIO_BLOCKING_THREADS}}
{{/BUCKETS_MDAPI_TOKIO_BLOCKING_THREADS}}
{{^BUCKETS_MDAPI_TOKIO_BLOCKING_THREADS}}
blocking_threads = 200
{{/BUCKETS_MDAPI_TOKIO_BLOCKING_THREADS}}
{{#BUCKETS_MDAPI_TOKIO_THREAD_STACK_SIZE}}
thread_stack_size = {{BUCKETS_MDAPI_TOKIO_THREAD_STACK_SIZE}}
{{/BUCKETS_MDAPI_TOKIO_THREAD_STACK_SIZE}}
{{^BUCKETS_MDAPI_TOKIO_THREAD_STACK_SIZE}}
thread_stack_size = 2097152
{{/BUCKETS_MDAPI_TOKIO_THREAD_STACK_SIZE}}
{{#BUCKETS_MDAPI_TOKIO_THREAD_NAME_PREFIX}}
thread_name_prefix = "{{BUCKETS_MDAPI_TOKIO_THREAD_NAME_PREFIX}}"
{{/BUCKETS_MDAPI_TOKIO_THREAD_NAME_PREFIX}}
{{^BUCKETS_MDAPI_TOKIO_THREAD_NAME_PREFIX}}
thread_name_prefix = "buckets-mdapi-worker-"
{{/BUCKETS_MDAPI_TOKIO_THREAD_NAME_PREFIX}}
